<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
  <title>Config</title>
  <style type="text/css">
    /* <![CDATA[ */
    body { font-family: system-ui, Arial, sans-serif; margin: 2rem; }
    table { border-collapse: collapse; table-layout: fixed; width: 100%; }
    th, td { border: 1px solid #ccc; padding: .5rem; text-align: left; vertical-align: top; word-wrap: break-word; }
    caption { font-weight: bold; text-align: left; margin-bottom: .5rem; }
    ul { margin: 0; padding-left: 1.25rem; }
    /* ]]> */
  </style>
</head>
<body>
  <h1>Current configuration</h1>

  <h2>App Configuration</h2>
  <table>
    <colgroup>
      <col style="width:30%" />
      <col style="width:70%" />
    </colgroup>
    <thead>
      <tr>
        <th>Envvar</th>
        <th>Value</th>
      </tr>
    </thead>
    <tbody>
      {% for key, value in config_base.items() %}
        <tr>
          <td>{{ key }}</td>
          <td>{{ value }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  {% set groups = config_groups.get('receiver_groups', []) %}

  <h2>Receiver Groups</h2>
  <table>
    <colgroup>
      <col style="width:30%" />
      <col style="width:70%" />
    </colgroup>
    <thead>
      <tr>
        <th>Group</th>
        <th>Receivers</th>
      </tr>
    </thead>
    <tbody>
      {% for g in groups %}
        <tr>
          <td>{{ g.description }}</td>
          <td>
            {% if g.receivers %}
              <ul>
                {% for r in g.receivers %}
                  <li>{{ r.number }} - {{ r.name }}</li>
                {% endfor %}
              </ul>
            {% else %}
              <em>No receivers</em>
            {% endif %}
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</body>
</html>